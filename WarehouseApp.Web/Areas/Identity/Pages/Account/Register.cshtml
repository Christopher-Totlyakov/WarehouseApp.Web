@page
@using static WarehouseApp.Common.EntityValidationConstants.Users;
@model RegisterModel
@{
	ViewData["Title"] = "Register";
}

<h1>Register</h1>
<div class="row">
	<div class="col-md-6">
		<form id="register-form" method="post" novalidate="novalidate" data-validate="true">
			<h2>Register a New User</h2>
			<div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>

			<div class="form-group mb-3">
				<label asp-for="Input.UserName"></label>
				<input asp-for="Input.UserName" class="form-control" data-val="true"
					   data-val-required="The username is required."
					   data-val-length="The username must be between 2 and 20 characters."
					   data-val-length-min="2"
					   data-val-length-max="20" />
				<span asp-validation-for="Input.UserName" class="text-danger"></span>
			</div>

			<div class="form-group mb-3">
				<label asp-for="Input.Email"></label>
				<input asp-for="Input.Email" class="form-control" data-val="true"
					   data-val-required="The email is required."
					   data-val-length="The email must be between 6 and 25 characters."
					   data-val-length-min="6"
					   data-val-length-max="25"
					   data-val-email="The email format is invalid." />
				<span asp-validation-for="Input.Email" class="text-danger"></span>
			</div>

			<div class="form-floating mb-3">
				<input asp-for="Input.Password" class="form-control" data-val="true"
					   data-val-required="The password is required."
					data-val-regex="The password must contain at least one number."
					data-val-regex-pattern="^(?=.*\d).+$"
					   data-val-length="The password must be at least 6 characters long."
					   data-val-length-min="6" />
				<label asp-for="Input.Password">Password</label>
				<span asp-validation-for="Input.Password" class="text-danger"></span>
				
			</div>
			<div class="form-floating mb-3">
				<input asp-for="Input.ConfirmPassword" class="form-control" data-val="true"
					   data-val-required="Please confirm your password."
					   data-val-equalto="Passwords do not match."
					   data-val-equalto-other="*.Password" />
					   <label asp-for="Input.ConfirmPassword">Confirm Password</label>
				<span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
			</div>

			<!-- User Type -->
			<div class="form-group mb-3">
				<label for="userType">User Type</label>
				<select asp-for="Input.UserType" id="userType" class="form-control" required>
					<option value="">Select...</option>
					<option value="Customer">Customer</option>
					<option value="Distributor">Distributor</option>
					<option value="Supplier">Supplier</option>
					<option value="WarehouseWorker">Warehouse Worker</option>
				</select>
			</div>

			<div id="dynamic-fields">
			</div>

			<button type="submit" class="btn btn-primary w-100">Register</button>
		</form>
	</div>
</div>

@section Scripts {
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>

	<script src="~/js/loadingUserType.js"></script>
	
}

